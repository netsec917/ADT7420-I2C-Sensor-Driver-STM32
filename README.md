# ADT7420-I2C-Sensor-Driver-STM32
Analog Devices ADT7420 I2C Temperature sensor driver for STM32, with Output to an HD44780U based display


## Driver files:
The demo project follows the standard structure generated by the STM32CubeIDE,
as such all of the application files can be found inside of the Src & Inc subdirectories of the core directory:
### Core/Inc directory
**adt7420_driver.h** - Defines necessary macros, enums & structs for the driver, as well as declaring function interface

**hd44780u_driver.h** - Defines necessary macros, enums & structs for the driver, as well as declaring function interface

**ring_buffer.h** - Declares the interface & defines a ring buffer for logging output over USART

**demo.h** - Declares volatile variables for use in interrupts, functions for use in demo application

**main.h** - Defines pinout for ADT7420 sensor as macros

### Core/Src directory

**main.c** - Contains main application loop for taking a reading from the ADT7420 sensor, upon timer interrupt.

**demo.c** - Contains definition of volatible variables for interrupts, functions for initial configuration of ADT7420 & HD44780U, taking a sensor reading with output to display and additional interrupt driven logging over USART

**stm32l4xx_it.c** - Contains interrupt for logging output over USART, and timer interrupt for taking a new sensor measurement

**adt7420_driver.c** - Implements driver interface declared in header file

**hd44780u_driver.c** - Implements driver interface declared in header file

## Reference datasheets for drivers & demo application pinout

### Datasheet
The following datasheet was used as the primary source for the creation of the ADT7420 driver

https://www.analog.com/media/en/technical-documentation/data-sheets/ADT7420.pdf

For the HD44780U display the following datasheet was used

https://www.sparkfun.com/datasheets/LCD/HD44780.pdf

### Pinout
The demo application uses the following pinout defined in **core/inc/main.h** from a Nucleo L432KC board for interfacing with the ADT7420 sensor

**ADT7420_SCL_Pin** - GPIOA PIN 9

**ADT7420_SDA_Pin** - GPIOA PIN 10

Note that the HD44780U pin out is declared as the fields of the **hd44780u** struct for the driver, in **demo.c** as part of the **hd44780u_config** function 

**HD44780U enable pin** - GPIOB PIN 4

**HD44780U register select pin** - GPIOB PIN 5

**HD44780U data pin 4** - GPIOB PIN 0

**HD44780U data pin 5** - GPIOB PIN 7

**HD44780U data pin 6** - GPIOB PIN 6

**HD44780U data pin 7** - GPIOB PIN 1
